{% extends 'partials/layout-main.html' %}
{% load static %}{% load custom_tags %}
{% load custom_tags %}
        
{% block content %}
   <!--begin::Content wrapper-->
   <div class="d-flex flex-column flex-column-fluid">
      <!--begin::Toolbar-->
      <div id="kt_app_toolbar" class="app-toolbar py-3 py-lg-6">
         <!--begin::Toolbar container-->
         <div
            id="kt_app_toolbar_container"
            class="app-container container-xxl d-flex flex-stack"
         >
            <!--begin::Page title-->
            <div
               class="page-title d-flex flex-column justify-content-center flex-wrap me-3"
            >
               <!--begin::Title-->
               <h1
                  class="page-heading d-flex text-gray-900 fw-bold fs-3 flex-column justify-content-center my-0"
               >
                  Product List
               </h1>
               <!--end::Title-->

               <!--begin::Breadcrumb-->
               <ul
                  class="breadcrumb breadcrumb-separatorless fw-semibold fs-7 my-0 pt-1"
               >
                  <!--begin::Item-->
                  <li class="breadcrumb-item text-muted">
                     <a
                        href="#!"
                        class="text-muted text-hover-primary"
                     >
                        Home
                     </a>
                  </li>
                  <!--end::Item-->
                  <!--begin::Item-->
                  <li class="breadcrumb-item">
                     <span class="bullet bg-gray-500 w-5px h-2px"></span>
                  </li>
                  <!--end::Item-->

                  <!--begin::Item-->
                  <li class="breadcrumb-item text-muted">Products</li>
                  <!--end::Item-->
               </ul>
               <!--end::Breadcrumb-->
            </div>
            <!--end::Page title-->
            <!--begin::Actions-->
            <div class="d-flex align-items-center gap-2 gap-lg-3">
               

               <!--begin::Secondary button-->
               <!--end::Secondary button-->

               <!--begin::Primary button-->
               <!--end::Primary button-->
            </div>
            <!--end::Actions-->
         </div>
         <!--end::Toolbar container-->
      </div>
      <!--end::Toolbar-->

      <!--begin::Content-->
      <div id="kt_app_content" class="app-content flex-column-fluid">
         <!--begin::Content container-->
         <div id="kt_app_content_container" class="app-container container-xxl">
            <!--begin::Card-->
            <div class="card">
               <!--begin::Card header-->
               <div class="card-header border-0 pt-6">
                  <!--begin::Card title-->
                  <div class="card-title">
                     <!--begin::Search-->
                     <div
                        class="d-flex align-items-center position-relative my-1"
                     >
                        <i
                           class="ki-duotone ki-magnifier fs-3 position-absolute ms-5"
                           ><span class="path1"></span
                           ><span class="path2"></span
                        ></i>
                        <input
                           type="text"
                           data-kt-product-table-filter="search"
                           class="form-control form-control-solid w-250px ps-12"
                           placeholder="Search Products"
                        />
                     </div>
                     <!--end::Search-->
                  </div>
                  <!--begin::Card title-->

                  <!--begin::Card toolbar-->
                  <div class="card-toolbar">
                     <!--begin::Toolbar-->
                     <div
                        class="d-flex justify-content-end"
                        data-kt-product-table-toolbar="base"
                     >
                        

                        <!--begin::Export-->
                        <button
                           type="button"
                           class="btn btn-primary me-3"
                           data-bs-toggle="modal"
                           data-bs-target="#kt_modal_add_product"
                        >
                           <i class="ki-duotone ki-plus fs-2"
                              ><span class="path1"></span
                              ><span class="path2"></span
                           ></i>
                           Add Product
                        </button>
                        <!--end::Export-->
                     </div>
                     <!--end::Toolbar-->

                     <!--begin::Group actions-->
                     <div
                        class="d-flex justify-content-end align-items-center d-none"
                        data-kt-product-table-toolbar="selected"
                     >
                        <div class="fw-bold me-5">
                           <span
                              class="me-2"
                              data-kt-product-table-select="selected_count"
                           ></span>
                           Selected
                        </div>

                        <button
                           type="button"
                           class="btn btn-danger"
                           data-kt-product-table-select="delete_selected"
                        >
                           Delete Selected
                        </button>
                     </div>
                     <!--end::Group actions-->
                  </div>
                  <!--end::Card toolbar-->
               </div>
               <!--end::Card header-->

               <!--begin::Card body-->
               <div class="card-body pt-0">
                  <!--begin::Table-->
                  <table
                     class="table align-middle table-row-dashed fs-6 gy-5"
                     id="kt_products_table"
                  >
                     <thead>
                        <tr
                           class="text-start text-gray-500 fw-bold fs-7 text-uppercase gs-0"
                        >
                           <th class="w-10px pe-2">
                              <div
                                 class="form-check form-check-sm form-check-custom form-check-solid me-3"
                              >
                                 <input
                                    class="form-check-input"
                                    type="checkbox"
                                    data-kt-check="true"
                                    data-kt-check-target="#kt_products_table .form-check-input"
                                    value="1"
                                 />
                              </div>
                           </th>
                           <th class="min-w-125px" data-priority="1">Name</th>
                           <th class="min-w-125px">Details</th>
                           <th class="min-w-125px">Status</th>
                           <th class="min-w-125px">Stock</th>
                           <th class="min-w-125px">Created Date</th>
                           <th class="text-end min-w-70px">Actions</th>
                        </tr>
                     </thead>
                     <tbody class="fw-semibold text-gray-600">
                        {% for c in items %}
                        <tr>
                           <td>
                              <div
                                 class="form-check form-check-sm form-check-custom form-check-solid"
                              >
                                 <input
                                    class="form-check-input"
                                    type="checkbox"
                                    value="1"
                                 />
                              </div>
                           </td>

                           <td>
                              <div class="d-flex align-items-center">

                                 <!--begin::Title-->
                                 <div class="ms-0">
                                       <div class="fw-bold">{{ c.name }}</div>
                                       <div class="fs-7 text-muted">{{ c.sku }}</div>
                                 </div>
                                 <!--end::Title-->
                              </div>
                           </td>
                           <td>
                             {{ c.more_info }}
                           </td>
                           <td>
                              <div class="badge {{ c.stock_status.0 }} fw-bold">
                                 {{ c.stock_status.1 }}
                              </div>

                           </td>
                           <td data-filter="full">
                              {% comment %} {{ c.stock }} {% endcomment %}
                              {{ c.remaining_stock }}
                           </td>
                           
                           <td>{{ c.created_at }}</td>
                           <td class="text-end">
                              <a
                                 href="#"
                                 class="btn btn-sm btn-light btn-flex btn-center btn-active-light-primary"
                                 data-kt-menu-trigger="click"
                                 data-kt-menu-placement="bottom-end"
                              >
                                 Actions
                                 <i class="ki-duotone ki-down fs-5 ms-1"></i>
                              </a>
                              <!--begin::Menu-->
                              <div
                                 class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-600 menu-state-bg-light-primary fw-semibold fs-7 w-125px py-4"
                                 data-kt-menu="true"
                              >
                               
                                 <!--begin::Menu item-->
                                 <div class="menu-item px-3">
                                    <a href="#!" data-bs-toggle="modal"
                           data-bs-target="#kt_modal_add_qrcode_{{c.item_id}}" class="menu-link px-3">
                                       Add QR Code
                                    </a>
                                 </div>
                                 <!--end::Menu item-->

                                 <!--begin::Menu item-->
                                 <div class="menu-item px-3">
                                    <a
                                       href="#!"
                                       class="menu-link px-3"
                                       data-bs-toggle="modal"
                                       data-bs-target="#kt_modal_edit_product_{{c.item_id}}"
                                    >
                                       Edit Product
                                    </a>
                                 </div>
                                 <!--end::Menu item-->
                              </div>
                              <!--end::Menu-->
                           </td>
                           <!--begin::Modal - Adjust Balance-->
                        <div
                           class="modal fade"
                           id="kt_modal_add_qrcode_{{c.item_id}}"
                           tabindex="-1"
                           aria-hidden="true"
                        >
                           <!--begin::Modal dialog-->
                           <div class="modal-dialog modal-dialog-centered mw-650px">
                              <!--begin::Modal content-->
                              <div class="modal-content">
                                 <!--begin::Modal header-->
                                 <div class="modal-header">
                                    <!--begin::Modal title-->
                                    <h2 class="fw-bold">Generate Product QR Codes</h2>
                                    <!--end::Modal title-->

                                    <!--begin::Close-->
                                    <div
                                       data-bs-dismiss="modal" aria-label="Close"
                                       class="btn btn-icon btn-sm btn-active-icon-primary"
                                    >
                                       <i class="ki-duotone ki-cross fs-1"
                                          ><span class="path1"></span
                                          ><span class="path2"></span
                                       ></i>
                                    </div>
                                    <!--end::Close-->
                                 </div>
                                 <!--end::Modal header-->

                                 <!--begin::Modal body-->
                                 <div class="modal-body scroll-y mx-5 mx-xl-15 my-7">
                                    <!--begin::Form-->
                                    <form
                                       class="form"
                                       action="/products/qr-gen/"
                                        method="POST"
                                    >
                                    {% csrf_token %}
                                       <!--begin::Input group-->
                                       <div class="fv-row mb-5">
                                          <!--begin::Label-->
                                          <label class="fs-5 fw-semibold form-label mb-5"
                                             >Product Name:</label
                                          >
                                          <!--end::Label-->

                                          <!--begin::Input-->
                                          <input type="hidden"
                                             class="form-control form-control-solid"
                                             placeholder="Name of Product"
                                             value="{{ c.item_id }}"
                                             name="name"
                                          />
                                          <input type="text"
                                             class="form-control form-control-solid"
                                             placeholder="Name of Product"
                                             value="{{ c.name }}"
                                             disabled
                                          />
                                          <!--end::Input-->
                                       </div>
                                       <!--end::Input group-->

                                       <div class="row">
                                       <div class="col-lg-12">
                                       <!--begin::Input group-->
                                       <div class="fv-row mb-5">
                                          <!--begin::Label-->
                                          <label class="fs-5 fw-semibold form-label mb-5"
                                             >Number of QR Codes:</label
                                          >
                                          <!--end::Label-->

                                          <!--begin::Input-->
                                          <input type="number"
                                             class="form-control form-control-solid"
                                             placeholder="Number of QR Codes"
                                             value="1"
                                             name="qty"
                                          />
                                          <!--end::Input-->
                                       </div>
                                       <!--end::Input group-->
                                       </div>
                                       

                                       

                                       <!--begin::Actions-->
                                       <div class="text-center">
                                          <button
                                             type="reset"
                                             class="btn btn-light me-3"
                                             data-bs-dismiss="modal" aria-label="Close"
                                          >
                                             Discard
                                          </button>

                                          <button
                                             type="submit"
                                             class="btn btn-primary"
                                             data-bs-dismiss="modal" aria-label="Close"
                                          >
                                             <span class="indicator-label"> Generate QR </span>
                                             <span class="indicator-progress">
                                                Please wait...
                                                <span
                                                   class="spinner-border spinner-border-sm align-middle ms-2"
                                                ></span>
                                             </span>
                                          </button>
                                       </div>
                                       <!--end::Actions-->
                                    </form>
                                    <!--end::Form-->
                                 </div>
                                 <!--end::Modal body-->
                              </div>
                              <!--end::Modal content-->
                           </div>
                           <!--end::Modal dialog-->
                        </div>
                        <!--end::Modal - New Card--><!--end::Modals-->
                        </tr>

                        

            <!--begin::Modal - Adjust Balance-->
            <div
               class="modal fade"
               id="kt_modal_edit_product_{{c.item_id}}"
               tabindex="-1"
               aria-hidden="true"
            >
               <!--begin::Modal dialog-->
               <div class="modal-dialog modal-dialog-centered mw-650px">
                  <!--begin::Modal content-->
                  <div class="modal-content">
                     <!--begin::Modal header-->
                     <div class="modal-header">
                        <!--begin::Modal title-->
                        <h2 class="fw-bold">Edit Product</h2>
                        <!--end::Modal title-->

                        <!--begin::Close-->
                        <div
                           id="kt_modal_add_product_close"
                           data-bs-dismiss="modal" aria-label="Close"
                           class="btn btn-icon btn-sm btn-active-icon-primary"
                        >
                           <i class="ki-duotone ki-cross fs-1"
                              ><span class="path1"></span
                              ><span class="path2"></span
                           ></i>
                        </div>
                        <!--end::Close-->
                     </div>
                     <!--end::Modal header-->

                     <!--begin::Modal body-->
                     <div class="modal-body scroll-y mx-5 mx-xl-15 my-7">
                        <!--begin::Form-->
                        <form
                           class="form"
                           action="{% url 'core:edit-products' %}"
                           method="POST"
                           id="editProductForm_{{c.item_id}}"
                        >
                        {% csrf_token %}
                        <input type="hidden"
                                 name="item_id"
                                 value="{{c.item_id}}"
                              />
                           <!--begin::Input group-->
                           <div class="fv-row mb-5">
                              <!--begin::Label-->
                              <label class="fs-5 fw-semibold form-label mb-5"
                                 >Product Name:</label
                              >
                              <!--end::Label-->

                              <!--begin::Input-->
                              <input type="text"
                                 class="form-control form-control-solid"
                                 placeholder="Name of Product"
                                 id="name-value"
                                 name="name"
                                 value="{{c.name}}"
                              />
                              <!--end::Input-->
                           </div>
                           <!--end::Input group-->

                           <div class="row">
                           <div class="col-lg-6">
                           <!--begin::Input group-->
                           <div class="fv-row mb-5">
                              <!--begin::Label-->
                              <label class="fs-5 fw-semibold form-label mb-5"
                                 >Stock:</label
                              >
                              <!--end::Label-->

                              <!--begin::Input-->
                              <input type="number"
                                 class="form-control form-control-solid"
                                 placeholder="Stock in hand"
                                 value="{{c.stock}}"
                                 id="stock-value"
                                 name="stock"
                              />
                              <!--end::Input-->
                           </div>
                           <!--end::Input group-->
                           </div>
                           <div class="col-lg-6">
                           <!--begin::Input group-->
                           <div class="fv-row mb-5">
                              <!--begin::Label-->
                              <label class="fs-5 fw-semibold form-label mb-5"
                                 >Unit Price:</label
                              >
                              <!--end::Label-->

                              <!--begin::Input-->
                              <input type="number"
                                 class="form-control form-control-solid"
                                 placeholder="----"
                                 id="price-value"
                                 name="unit_price"
                                 value="{{c.unit_price}}"
                              />
                              <!--end::Input-->
                           </div>
                           <!--end::Input group-->
                           </div>
                           <!--begin::Input group-->
                           <div class="fv-row mb-5">
                              <!--begin::Label-->
                              <label class="fs-5 fw-semibold form-label mb-5"
                                 >More Info:</label
                              >
                              <!--end::Label-->

                              <!--begin::Input-->
                              <textarea type="text"
                                 class="form-control form-control-solid"
                                 placeholder="Additional Info"
                                 id="info-value"
                                 name="more_info"
                                 rows="2"
                                 value="{{c.more_info}}"
                              /></textarea>
                              <!--end::Input-->
                           </div>
                           <!--end::Input group-->

                           

                           <!--begin::Actions-->
                           <div class="text-center">
                              <button
                                 type="reset"
                                 id="kt_modal_add_product_cancel"
                                 data-bs-dismiss="modal" aria-label="Close"
                                 class="btn btn-light me-3"
                              >
                                 Discard
                              </button>

                              <button
                                 type="button"
                                 class="btn btn-primary requires-admin"
                                 data-form-id="editProductForm_{{c.item_id}}"
                                 {% comment %} data-action-url="{% url 'core:edit-products' %}" {% endcomment %}
                              >
                                 <span class="indicator-label"> Edit Product </span>
                                 <span class="indicator-progress">
                                    Please wait...
                                    <span
                                       class="spinner-border spinner-border-sm align-middle ms-2"
                                    ></span>
                                 </span>
                              </button>
                           </div>
                           <!--end::Actions-->
                        </form>
                        <!--end::Form-->
                     </div>
                     <!--end::Modal body-->
                  </div>
                  <!--end::Modal content-->
               </div>
               <!--end::Modal dialog-->
            </div>
            <!--end::Modal - New Card--><!--end::Modals-->
                        {% empty %}
                        <tr>
                            <td></td>
                            <td>N/A</td>
                            <td>N/A</td>
                            <td>N/A</td>
                            <td>N/A</td>
                            <td>N/A</td>
                            <td>N/A</td>
                        </tr>
                        {% endfor %}
                     </tbody>
                  </table>
                  <!--end::Table-->
               </div>
               <!--end::Card body-->
            </div>
            <!--end::Card-->
            
            <!--begin::Modal - Adjust Balance-->
            <div
               class="modal fade"
               id="kt_modal_add_product"
               tabindex="-1"
               aria-hidden="true"
            >
               <!--begin::Modal dialog-->
               <div class="modal-dialog modal-dialog-centered mw-650px">
                  <!--begin::Modal content-->
                  <div class="modal-content">
                     <!--begin::Modal header-->
                     <div class="modal-header">
                        <!--begin::Modal title-->
                        <h2 class="fw-bold">Add New Product</h2>
                        <!--end::Modal title-->

                        <!--begin::Close-->
                        <div
                           id="kt_modal_add_product_close"
                           class="btn btn-icon btn-sm btn-active-icon-primary"
                        >
                           <i class="ki-duotone ki-cross fs-1"
                              ><span class="path1"></span
                              ><span class="path2"></span
                           ></i>
                        </div>
                        <!--end::Close-->
                     </div>
                     <!--end::Modal header-->

                     <!--begin::Modal body-->
                     <div class="modal-body scroll-y mx-5 mx-xl-15 my-7">
                        <!--begin::Form-->
                        <form
                           id="kt_modal_add_product_form"
                           class="form"
                           action="/products/new/"
                           method="POST"
                           data-kt-redirect="/products/new/"
                        >
                        {% csrf_token %}
                           <!--begin::Input group-->
                           <div class="fv-row mb-5">
                              <!--begin::Label-->
                              <label class="fs-5 fw-semibold form-label mb-5"
                                 >Product Name:</label
                              >
                              <!--end::Label-->

                              <!--begin::Input-->
                              <input type="text"
                                 class="form-control form-control-solid"
                                 placeholder="Name of Product"
                                 id="name-value"
                                 name="name"
                              />
                              <!--end::Input-->
                           </div>
                           <!--end::Input group-->

                           <div class="row">
                           <div class="col-lg-6">
                           <!--begin::Input group-->
                           <div class="fv-row mb-5">
                              <!--begin::Label-->
                              <label class="fs-5 fw-semibold form-label mb-5"
                                 >Stock:</label
                              >
                              <!--end::Label-->

                              <!--begin::Input-->
                              <input type="number"
                                 class="form-control form-control-solid"
                                 placeholder="Stock in hand"
                                 value="1"
                                 id="stock-value"
                                 name="stock"
                              />
                              <!--end::Input-->
                           </div>
                           <!--end::Input group-->
                           </div>
                           <div class="col-lg-6">
                           <!--begin::Input group-->
                           <div class="fv-row mb-5">
                              <!--begin::Label-->
                              <label class="fs-5 fw-semibold form-label mb-5"
                                 >Unit Price:</label
                              >
                              <!--end::Label-->

                              <!--begin::Input-->
                              <input type="number"
                                 class="form-control form-control-solid"
                                 placeholder="----"
                                 id="price-value"
                                 name="unit_price"
                              />
                              <!--end::Input-->
                           </div>
                           <!--end::Input group-->
                           </div>
                           <!--begin::Input group-->
                           <div class="fv-row mb-5">
                              <!--begin::Label-->
                              <label class="fs-5 fw-semibold form-label mb-5"
                                 >More Info:</label
                              >
                              <!--end::Label-->

                              <!--begin::Input-->
                              <textarea type="text"
                                 class="form-control form-control-solid"
                                 placeholder="Additional Info"
                                 id="info-value"
                                 name="more_info"
                                 rows="2"
                              /></textarea>
                              <!--end::Input-->
                           </div>
                           <!--end::Input group-->

                           

                           <!--begin::Actions-->
                           <div class="text-center">
                              <button
                                 type="reset"
                                 id="kt_modal_add_product_cancel"
                                 class="btn btn-light me-3"
                              >
                                 Discard
                              </button>

                              <button
                                 type="submit"
                                 id="kt_modal_add_product_submit"
                                 class="btn btn-primary"
                              >
                                 <span class="indicator-label"> Generate Product </span>
                                 <span class="indicator-progress">
                                    Please wait...
                                    <span
                                       class="spinner-border spinner-border-sm align-middle ms-2"
                                    ></span>
                                 </span>
                              </button>
                           </div>
                           <!--end::Actions-->
                        </form>
                        <!--end::Form-->
                     </div>
                     <!--end::Modal body-->
                  </div>
                  <!--end::Modal content-->
               </div>
               <!--end::Modal dialog-->
            </div>
            <!--end::Modal - New Card--><!--end::Modals-->
         </div>
         <!--end::Content container-->
      </div>
      <!--end::Content-->
   </div>
   <!--end::Content wrapper-->
   
{% endblock %}
